# Участие в проекте ARVlite

Этот документ описывает правила участия в проекте ARVlite. Следование этим правилам помогает поддерживать качество и согласованность кода, а также обеспечивает беспрепятственное сотрудничество между участниками.

## Руководство по стилю кода

### Python
- Следуйте руководству по стилю PEP 8 для Python кода
- Используйте 4 пробела для отступов
- Максимальная длина строки 88 символов (следуя форматированию Black)
- Используйте аннотации типов для всех параметров функций и возвращаемых значений
- Используйте описательные имена переменных и функций

### JavaScript/TypeScript
- Используйте 2 пробела для отступов
- Максимальная длина строки 100 символов
- Используйте camelCase для переменных и функций
- Используйте PascalCase для компонентов React
- Используйте строгий режим (strict mode) во всех JavaScript файлах
- Используйте TypeScript для обеспечения безопасности типов, где это возможно

## Соглашения об именовании

### Переменные
- Python: Используйте snake_case (например, `user_id`, `ar_content_data`)
- JavaScript/TypeScript: Используйте camelCase (например, `userId`, `arContentData`)

### Функции
- Python: Используйте snake_case (например, `get_user_by_id`, `validate_ar_content`)
- JavaScript/TypeScript: Используйте camelCase (например, `getUserById`, `validateArContent`)

### Компоненты
- Компоненты React: Используйте PascalCase (например, `ARContentForm`, `DashboardLayout`)
- Имена файлов: Должны соответствовать именам компонентов (например, `ARContentForm.tsx`)

### Классы и типы
- Классы Python: Используйте PascalCase (например, `ARContentModel`, `UserService`)
- Интерфейсы/типы TypeScript: Используйте PascalCase с префиксом 'I' (например, `IUser`, `IARContent`)

## Рабочий процесс Git

1. Создайте ветку функции из основной ветки:
   ```bash
   git checkout -b feature/your-feature-name
   ```

2. Внесите изменения и зафиксируйте их с описательными сообщениями:
   ```bash
   git add .
   git commit -m "feat: Добавлена поддержка новой категории AR-контента"
   ```

3. Поддерживайте вашу ветку в актуальном состоянии с основной веткой:
   ```bash
   git fetch origin
   git merge origin/main
   ```

4. Отправьте изменения в свой форк/ветку:
   ```bash
   git push origin feature/your-feature-name
   ```

### Сообщения коммитов

Следуйте формату conventional commits:
- `feat:` для новых функций
- `fix:` для исправления ошибок
- `docs:` для изменений в документации
- `style:` для изменений форматирования (пробелы, отсутствующие точки с запятой и т.д.)
- `refactor:` для реорганизации кода без изменения поведения
- `test:` для добавления или модификации тестов
- `chore:` для задач обслуживания

Формат: `<type>(scope): description`
Пример: `feat(ar-content): добавлена поддержка новой категории контента`

## Процесс Pull Request

1. Убедитесь, что ваш PR решает конкретную проблему или добавляет четко определенную функцию
2. Включите подробное описание внесенных изменений
3. При необходимости обновите документацию
4. Добавьте тесты для новой функциональности
5. Убедитесь, что все тесты проходят перед отправкой
6. Запросите проверку у сопровождающих

### Что проверяется во время ревью PR

- Код соответствует установленным руководствам по стилю
- Изменения хорошо протестированы
- Документация обновлена
- Не введены уязвимости безопасности
- Рассмотрены последствия для производительности
- Реализована надлежащая обработка ошибок
- Код поддерживаемый и читаемый

### Написание описаний PR

Включите:
- Краткое изложение сделанных изменений
- Проблема, которую решает
- Принятый подход
- Любые критические изменения
- Скриншоты или демонстрации, если применимо
- Связанные проблемы или тикеты

## Требования к тестированию

### Модульные тесты
- Все новые функции и классы должны иметь модульные тесты
- Существующий код должен поддерживать или улучшать покрытие тестами
- Тестируйте граничные случаи и условия ошибок
- Python: Используйте фреймворк pytest
- JavaScript/TypeScript: Используйте Jest или React Testing Library

### Интеграционные тесты
- Тестируйте конечные точки API и взаимодействие с базой данных
- Проверяйте, что компоненты работают вместе, как ожидалось
- Тестируйте потоки аутентификации и авторизации
- Включайте тесты для разных провайдеров хранения

### Покрытие тестами
- Стремитесь к 80%+ покрытию тестами нового кода
- Критические пути должны иметь 100% покрытие
- Запускайте тесты локально перед отправкой изменений

## Требования к документации

### Комментарии в коде
- Объясняйте сложные алгоритмы или бизнес-логику
- Документируйте неочевидные варианты реализации
- Используйте комментарии экономно - код должен быть самодокументированным, когда это возможно

### Docstrings (Python)
- Все публичные функции/классы должны иметь docstrings
- Следуйте docstrings в стиле Google
- Включайте разделы Args, Returns, Raises при необходимости

```python
def process_ar_content(content_id: str) -> bool:
    """Обрабатывает AR-контент для валидации и хранения.
    
    Args:
        content_id: Уникальный идентификатор AR-контента
        
    Returns:
        True если обработка прошла успешно, иначе False
        
    Raises:
        ValidationError: Если контент не проходит проверки валидации
    """
```

### JSDoc (JavaScript/TypeScript)
- Все экспортируемые функции и классы должны иметь JSDoc
- Включайте теги @param, @returns и @throws при необходимости

```javascript
/**
 * Обрабатывает AR-контент для валидации и хранения
 * @param {string} contentId - Уникальный идентификатор AR-контента
 * @returns {boolean} True если обработка прошла успешно, иначе false
 * @throws {ValidationError} Если контент не проходит проверки валидации
 */
function processArContent(contentId) {
```

## Рассмотрение производительности

- Оптимизируйте запросы к базе данных - используйте индексы должным образом
- Минимизируйте вызовы API и реализуйте кэширование, где это уместно
- Используйте async/await для операций ввода-вывода
- Избегайте блокирующих операций в потоках пользовательского интерфейса
- Реализуйте постраничный вывод для больших наборов данных
- Отслеживайте использование памяти в длительных процессах

## Лучшие практики безопасности

- Санитизируйте все пользовательские входные данные
- Используйте параметризованные запросы для предотвращения SQL-инъекций
- Реализуйте надлежащую аутентификацию и авторизацию
- Безопасно храните конфиденциальные данные (переменные окружения, зашифрованное хранилище)
- Проверяйте и санитизируйте загрузку файлов
- Реализуйте ограничение скорости для конечных точек API
- Используйте HTTPS в производственных средах
- Регулярно обновляйте зависимости для устранения уязвимостей безопасности

## Контрольный список код-ревью

Перед отправкой вашего PR убедитесь:
- [ ] Код соответствует руководствам по стилю
- [ ] Тесты добавлены/обновлены
- [ ] Документация обновлена
- [ ] В коде нет отладочных операторов
- [ ] Обработка ошибок реализована
- [ ] Рассмотрены вопросы безопасности
- [ ] Рассмотрены последствия для производительности
- [ ] Сообщения коммитов следуют соглашениям
- [ ] Описание PR полное

Благодарим вас за участие в проекте ARVlite!