# Часто задаваемые вопросы (FAQ)

Этот документ отвечает на общие вопросы о разработке с использованием ARVlite.

## Как мне добавить новую категорию AR-контента?

Чтобы добавить новую категорию AR-контента, вам нужно:

1. Определить категорию в моделях бэкенда:
   - Добавьте категорию в соответствующий enum в `ARV/app/enums.py`
   - Обновите модель AR-контента в `ARV/app/models/ar_content.py`, если необходимо

2. Обновить схему базы данных:
   - Создайте новую миграцию с помощью Alembic:
     ```bash
     cd ARV && alembic revision --autogenerate -m "Add new AR content category"
     ```
   - Примените миграцию:
     ```bash
     cd ARV && alembic upgrade head
     ```

3. Обновить фронтенд:
   - Добавьте категорию в соответствующие константы в коде фронтенда
   - Обновите формы и компоненты пользовательского интерфейса для поддержки новой категории
   - Измените форму создания AR-контента в `ARV/frontend/src/pages/ar-content/ARContentForm.tsx`

4. Добавить логику валидации и обработки API в `ARV/app/api/ar_content.py`

## Как интегрировать нового провайдера хранения?

Для интеграции нового провайдера хранения:

1. Создайте класс провайдера хранения в `ARV/app/core/storage_providers.py`:
   - Реализуйте базовый интерфейс хранения
   - Добавьте методы аутентификации и подключения
   - Реализуйте методы загрузки, скачивания и удаления

2. Зарегистрируйте провайдера в конфигурации хранения:
   - Обновите `ARV/app/core/storage.py`, чтобы включить вашего нового провайдера
   - Добавьте параметры конфигурации в `ARV/app/core/config.py`

3. Добавьте конечные точки API для нового провайдера в `ARV/app/api/storage.py`

4. Обновите фронтенд, чтобы позволить пользователям настраивать нового провайдера хранения:
   - Измените страницу настроек хранения в `ARV/frontend/src/pages/Storage.tsx`
   - Добавьте элементы пользовательского интерфейса для специфической настройки провайдера

5. Напишите тесты для нового провайдера в тестовом наборе

## Как добавить новую страницу в фронтенд?

Чтобы добавить новую страницу во фронтенд:

1. Создайте компонент страницы в `ARV/frontend/src/pages/`:
   ```tsx
   // ARV/frontend/src/pages/NewPage.tsx
   import React from 'react';
   
   const NewPage: React.FC = () => {
     return (
       <div className="container mx-auto p-4">
         <h1>Новая страница</h1>
         {/* Содержимое вашей страницы */}
       </div>
     );
   };
   
   export default NewPage;
   ```

2. Добавьте маршрут в конфигурацию маршрутизатора в `ARV/frontend/src/App.tsx`:
   ```tsx
   import NewPage from './pages/NewPage';
   
   // Добавьте маршрут:
   <Route path="/new-page" element={<NewPage />} />
   ```

3. При необходимости обновите навигацию:
   - Измените боковую панель в `ARV/frontend/src/components/layout/Sidebar.tsx`
   - Добавьте пункты меню с соответствующими разрешениями

4. Реализуйте любые необходимые хуки или сервисы для новой страницы
5. Добавьте тесты для нового компонента страницы

## Как создать новый эндпоинт API?

Чтобы создать новый эндпоинт API:

1. Определите схему Pydantic в `ARV/app/schemas/`:
   ```python
   from pydantic import BaseModel
   
   class NewEndpointRequest(BaseModel):
       field1: str
       field2: int
   ```

2. Создайте эндпоинт в соответствующем файле маршрутов в `ARV/app/api/routes/`:
   ```python
   from fastapi import APIRouter, Depends
   from app.schemas.new_endpoint import NewEndpointRequest
   from app.core.security import get_current_user
   
   router = APIRouter()
   
   @router.post("/new-endpoint")
   async def new_endpoint(
       request: NewEndpointRequest,
       current_user = Depends(get_current_user)
   ):
       # Ваша логика эндпоинта
       return {"status": "success"}
   ```

3. Зарегистрируйте маршрут в `ARV/app/api/__init__.py` или главном файле приложения

4. При необходимости добавьте соответствующую логику сервиса в `ARV/app/services/`

5. Напишите тесты для эндпоинта в соответствующем тестовом файле

## Как запустить тесты?

Чтобы запустить тесты для проекта ARVlite:

1. Из директории ARV запустите все тесты:
   ```bash
   cd ARV && python -m pytest
   ```

2. Чтобы запустить конкретные тесты:
   ```bash
   # Запустить конкретный тестовый файл
   cd ARV && python -m pytest tests/test_specific_file.py
   
   # Запустить тесты с конкретным маркером
   cd ARV && python -m pytest -m "integration"
   
   # Запустить тесты с отчетом о покрытии
   cd ARV && python -m pytest --cov=app
   ```

3. Для тестов фронтенда:
   ```bash
   cd ARV/frontend && npm test
   ```

4. Чтобы запустить end-to-end тесты:
   ```bash
   cd ARV && npx playwright test
   ```

## Как профилировать производительность?

Чтобы профилировать производительность в ARVlite:

1. Для профилирования бэкенда:
   - Используйте модуль cProfile Python:
     ```bash
     cd ARV && python -m cProfile -o profile_output.prof main.py
     ```
   - Используйте line_profiler для анализа по строкам:
     ```bash
     pip install line_profiler
     kernprof -l -v script_to_profile.py
     ```

2. Для профилирования эндпоинтов API:
   - Временно добавьте промежуточное программное обеспечение для измерения времени
   - Используйте ведение журнала для отслеживания времени выполнения
   - Используйте инструмент мониторинга, такой как Prometheus/Grafana, для непрерывного мониторинга

3. Для профилирования фронтенда:
   - Используйте вкладку производительности в инструментах разработчика браузера
   - Используйте профайлер React DevTools
   - Проверьте размер сборки с помощью webpack-bundle-analyzer

4. Профилирование запросов к базе данных:
   - Включите режим echo SQLAlchemy в разработке
   - Используйте EXPLAIN ANALYZE для запросов PostgreSQL

## Как отлаживать проблемы?

Чтобы отлаживать проблемы в ARVlite:

1. Отладка бэкенда:
   - Используйте операторы печати или ведение журнала для быстрой отладки
   - Используйте отладчик Python (pdb):
     ```python
     import pdb; pdb.set_trace()
     ```
   - Используйте инструменты отладки IDE с точками останова
   - Включите детальное ведение журнала в `ARV/app/core/config.py`

2. Отладка фронтенда:
   - Используйте консоль инструментов разработчика браузера
   - Используйте React Developer Tools
   - Добавьте операторы console.log стратегически
   - Используйте StrictMode React для выявления потенциальных проблем

3. Отладка базы данных:
   - Проверьте журналы базы данных
   - Используйте необработанные SQL-запросы для сложной отладки
   - Используйте команды Alembic для проверки состояния миграции

4. Отладка Docker/контейнера:
   - Проверьте журналы контейнера:
     ```bash
     docker logs container_name
     ```
   - Получите доступ к оболочке контейнера:
     ```bash
     docker exec -it container_name sh
     ```

## Распространенные ошибки и способы их решения

### Проблемы с подключением к базе данных
- Проверьте, запущен ли PostgreSQL
- Проверьте URL базы данных в переменных окружения
- Запустите миграции: `cd ARV && alembic upgrade head`

### Проблемы с аутентификацией
- Проверьте секрет JWT в переменных окружения
- Проверьте конфигурации OAuth в `ARV/app/core/config.py`
- Убедитесь, что администратор существует: `cd ARV && python create_admin.py`

### Проблемы с провайдером хранения
- Проверьте учетные данные и разрешения
- Проверьте сетевое подключение к провайдеру хранения
- Ищите конкретные сообщения об ошибках в журналах

### Проблемы со сборкой фронтенда
- Очистите node_modules и переустановите: `rm -rf node_modules && npm install`
- Проверьте наличие ошибок компиляции TypeScript
- Проверьте переменные окружения для эндпоинтов API

### Проблемы с миграциями
- Проверьте историю миграций: `cd ARV && alembic history`
- Проверьте текущую версию: `cd ARV && alembic current`
- Разрешите конфликты вручную, если это необходимо

## Где можно найти информацию?

### Документация
- Основная документация: `ARV/docs/`
- Документация API: `ARV/docs/API.md`
- Руководство по установке: `ARV/docs/SETUP.md`
- Обзор архитектуры: `ARV/docs/BACKEND.md`, `ARV/docs/FRONTEND.md`

### Структура кода
- Бэкенд API: `ARV/app/api/`
- Модели: `ARV/app/models/`
- Схемы: `ARV/app/schemas/`
- Сервисы: `ARV/app/services/`
- Фронтенд: `ARV/frontend/src/`

### Конфигурация
- Переменные окружения: `ARV/.env.example`
- Конфигурация базы данных: `ARV/app/core/config.py`
- Конфигурация Docker: `ARV/docker-compose.yml`

## Как связаться с командой?

- По техническим вопросам: Создайте issue в репозитории GitHub
- По срочным вопросам: Свяжитесь с сопровождающими проекта напрямую через GitHub
- По общим вопросам: Проверьте канал Discord/Slack проекта, если он доступен
- По вопросам безопасности: Отправьте электронное письмо команде безопасности напрямую
- По предложениям функций: Отправьте через GitHub issues с меткой "enhancement"

Для получения самой актуальной информации о контактах проверьте файл README.md в репозитории.