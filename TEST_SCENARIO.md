# Тестовый сценарий для проверки исправлений формы создания AR-контента

## Цель
Проверить, что форма создания нового AR-контента корректно обрабатывает выбор компании и проекта без ошибок "out-of-range value".

## Предварительные условия
1. Сервер запущен и доступен по адресу http://localhost:3000
2. База данных содержит хотя бы одну компанию (Vertex AR) и один проект
3. Пользователь авторизован в системе

## Шаги тестирования

### Тест 1: Создание AR-контента без указания companyId в URL
1. Перейти на страницу http://localhost:3000/ar-content/new
2. Проверить, что:
   - Форма загружается без ошибок
   - Выпадающий список компаний заполнен
   - Компания "Vertex AR" выбрана по умолчанию
   - Список проектов загружен для выбранной компании
   - Нет ошибок в консоли браузера

### Тест 2: Создание AR-контента с указанием companyId в URL
1. Перейти на страницу http://localhost:3000/companies/1/projects (где 1 - ID компании Vertex AR)
2. Нажать кнопку "New Project" и создать новый проект (если нет существующих проектов)
3. Перейти на страницу http://localhost:3000/projects/1/content/new (где 1 - ID проекта)
4. Проверить, что:
   - Форма загружается без ошибок
   - Выпадающий список компаний заполнен
   - Компания, соответствующая projectId, выбрана
   - Список проектов загружен для выбранной компании
   - Выбранный проект соответствует projectId из URL
   - Нет ошибок в консоли браузера

### Тест 3: Изменение выбранной компании
1. Перейти на страницу http://localhost:3000/ar-content/new
2. Выбрать другую компанию из выпадающего списка
3. Проверить, что:
   - Список проектов обновился в соответствии с выбранной компанией
   - Выбор проекта сброшен (пустое значение)
   - Нет ошибок в консоли браузера

### Тест 4: Создание нового проекта в процессе создания AR-контента
1. Перейти на страницу http://localhost:3000/ar-content/new
2. Заполнить информацию о клиенте
3. Перейти к шагу выбора проекта
4. Выбрать опцию "Create New Project"
5. Ввести название нового проекта
6. Продолжить заполнение формы
7. Проверить, что:
   - Новый проект успешно создается
   - AR-контент создается с привязкой к новому проекту
   - Нет ошибок в консоли браузера

## Ожидаемые результаты
- Все тесты проходят успешно
- Нет ошибок "MUI: You have provided an out-of-range value" в консоли браузера
- Форма корректно обрабатывает выбор компании и проекта
- Данные сохраняются в базе данных без ошибок

## Возможные проблемы и решения
1. Если возникает ошибка "out-of-range value":
   - Проверить, что значение companyId в форме соответствует одному из значений в выпадающем списке
   - Убедиться, что список компаний загружается до установки значения companyId

2. Если список проектов пуст:
   - Проверить, что companyId корректно передается в API для получения проектов
   - Убедиться, что в базе данных есть проекты для выбранной компании

3. Если companyId не устанавливается по умолчанию:
   - Проверить логику поиска компании по умолчанию (is_default или имя "Vertex AR")
   - Убедиться, что в базе данных есть компания с флагом is_default=true или именем "Vertex AR"