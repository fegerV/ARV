# Реализация ленивой загрузки и виртуализации

## Обзор

Реализована система ленивой загрузки медиафайлов и виртуализации списков для улучшения производительности интерфейса при работе с большими объемами данных.

## Компоненты

### 1. LazyImage
Реализована ленивая загрузка изображений с использованием IntersectionObserver.

**Файл**: `frontend/src/components/(media)/LazyImage.tsx`

**Особенности**:
- Использует IntersectionObserver для отслеживания попадания элемента во viewport
- Подгружает изображения заранее (rootMargin: '200px 0px')
- Поддерживает fallback высоту для предотвращения скачков layout

### 2. VideoListVirtualized
Виртуализированный список видео с использованием react-window.

**Файл**: `frontend/src/components/(media)/VideoListVirtualized.tsx`

**Особенности**:
- Использует FixedSizeList из react-window для рендеринга только видимых элементов
- Интегрирован с VideoPreview компонентом
- Поддерживает настройку высоты и высоты строк

### 3. VirtualizedTableBody
Виртуализированное тело таблицы для отображения больших наборов данных.

**Файл**: `frontend/src/components/(data)/VirtualizedTableBody.tsx`

**Особенности**:
- Универсальный компонент для виртуализации любых таблиц
- Принимает функцию рендеринга строк
- Подходит для таблиц с тысячами записей

## Интеграция

### Обновленные компоненты
1. **VideoPreview** - теперь использует LazyImage вместо стандартного img тега
2. **ImagePreview** - теперь использует LazyImage вместо стандартного img тега

### Новые зависимости
- `react-window` - для виртуализации списков

## Использование

### Ленивая загрузка изображений
Все изображения в VideoPreview и ImagePreview теперь загружаются лениво, что уменьшает нагрузку на сеть и ускоряет начальный рендеринг страниц.

### Виртуализация списков видео
Для страниц с большим количеством видео (например, страница деталей AR-контента) можно использовать VideoListVirtualized компонент.

### Виртуализация таблиц
Для таблиц с большим количеством строк (например, список AR-контентов) можно использовать VirtualizedTableBody компонент.

## Преимущества

1. **Улучшенная производительность** - рендерятся только видимые элементы
2. **Меньшая нагрузка на сеть** - изображения загружаются только при необходимости
3. **Плавная прокрутка** - даже при большом количестве элементов
4. **Сохранение функциональности** - все существующие возможности остаются рабочими

## Примеры использования

См. файлы:
- `frontend/src/components/(media)/VideoListVirtualizedUsageExample.tsx`
- `frontend/src/components/(data)/VirtualizedTableBodyUsageExample.tsx`