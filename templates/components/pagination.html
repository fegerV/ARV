<!-- Pagination Component -->
<div x-data="pagination()" x-init="init()">
    <div class="flex items-center justify-between">
        <div class="text-sm text-gray-700 dark:text-gray-300">
            Showing
            <span class="font-medium" x-text="startItem"></span>
            to
            <span class="font-medium" x-text="endItem"></span>
            of
            <span class="font-medium" x-text="totalItems"></span>
            results
        </div>
        
        <div class="flex items-center space-x-2">
            <!-- Previous Button -->
            <button @click="previousPage()" 
                    :disabled="currentPage <= 1"
                    :class="currentPage <= 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                    class="relative inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md transition-colors">
                <i class="fas fa-chevron-left"></i>
                <span class="ml-2">Previous</span>
            </button>
            
            <!-- Page Numbers -->
            <div class="hidden md:flex space-x-1">
                <template x-for="page in visiblePages" :key="page">
                    <button @click="goToPage(page)"
                            :class="page === currentPage ? 'bg-primary text-white' : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'"
                            class="relative inline-flex items-center px-4 py-2 text-sm font-medium border border-gray-300 dark:border-gray-600 transition-colors"
                            x-text="page">
                    </button>
                </template>
            </div>
            
            <!-- Next Button -->
            <button @click="nextPage()" 
                    :disabled="currentPage >= totalPages"
                    :class="currentPage >= totalPages ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 dark:hover:bg-gray-700'"
                    class="relative inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md transition-colors">
                <span class="mr-2">Next</span>
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>
</div>

<script>
function pagination() {
    return {
        currentPage: 1,
        totalPages: 1,
        totalItems: 0,
        pageSize: 20,
        visiblePages: [],
        startItem: 0,
        endItem: 0,
        
        init() {
            // These will be set by the parent component
            // This is a placeholder - actual values come from parent
        },
        
        updatePagination(currentPage, totalPages, totalItems, pageSize = 20) {
            this.currentPage = currentPage;
            this.totalPages = totalPages;
            this.totalItems = totalItems;
            this.pageSize = pageSize;
            
            // Calculate visible page range
            this.calculateVisiblePages();
            
            // Calculate item range
            this.calculateItemRange();
        },
        
        calculateVisiblePages() {
            const maxVisible = 7;
            let start = Math.max(1, this.currentPage - Math.floor(maxVisible / 2));
            let end = Math.min(this.totalPages, start + maxVisible - 1);
            
            // Adjust if we're near the end
            if (end - start < maxVisible - 1) {
                start = Math.max(1, end - maxVisible + 1);
            }
            
            this.visiblePages = [];
            for (let i = start; i <= end; i++) {
                this.visiblePages.push(i);
            }
        },
        
        calculateItemRange() {
            this.startItem = this.totalItems === 0 ? 0 : (this.currentPage - 1) * this.pageSize + 1;
            this.endItem = Math.min(this.currentPage * this.pageSize, this.totalItems);
        },
        
        previousPage() {
            if (this.currentPage > 1) {
                this.goToPage(this.currentPage - 1);
            }
        },
        
        nextPage() {
            if (this.currentPage < this.totalPages) {
                this.goToPage(this.currentPage + 1);
            }
        },
        
        goToPage(page) {
            if (page >= 1 && page <= this.totalPages) {
                // Dispatch event for parent component to handle
                this.$dispatch('page-changed', { page: page });
            }
        }
    };
}
</script>